<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Analyzer | InterviewMaster</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="js/auth.js"></script>
    <script>checkAuth();</script>
    <script src="js/chatbot.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
</head>

<body>

    <!-- Navigation -->
    <nav class="glass-nav">
        <div class="logo">INTERVIEW<span class="highlight">MASTER</span></div>
        <ul>
            <li><a href="assessment.html">Assessment</a></li>
            <li><a href="resume-analyzer.html" style="color: var(--accent-color);">Resume Tools</a></li>
            <li><a href="#" onclick="logout()" class="btn-contact"
                    style="background: var(--fail-red); color: white;">Logout</a></li>
        </ul>
    </nav>

    <div class="analyzer-container">

        <!-- Header -->
        <header class="analyzer-header">
            <h1>Resume <span class="highlight">Shortlisting</span> Checker</h1>
            <p>Upload your resume to see your ATS Score and Shortlisting Probability.</p>
        </header>

        <!-- 1. Import Section -->
        <section class="upload-section" id="uploadSection">
            <div class="upload-box" id="dropZone">
                <div class="upload-icon">üìÑ</div>
                <h3>Drag & Drop or Click to Upload</h3>
                <p>Supports PDF, DOCX, TXT</p>
                <input type="file" id="resumeInput" hidden accept=".pdf,.docx,.txt">
            </div>
        </section>

        <!-- Loading Animation (Hidden initially) -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="scanner"></div>
            <p>Scanning for Keywords...</p>
        </div>

        <!-- 2. Analysis Dashboard (Hidden initially) -->
        <div class="dashboard" id="dashboard">

            <!-- Top Row: Score & Level -->
            <div class="score-panel">
                <div class="gauge-container">
                    <svg class="score-ring" width="200" height="200">
                        <circle class="ring-bg" cx="100" cy="100" r="90"></circle>
                        <circle class="ring-progress" cx="100" cy="100" r="90"></circle>
                    </svg>
                    <div class="score-text">
                        <span id="scoreValue">0</span>
                        <small>/ 100</small>
                    </div>
                </div>
                <div class="level-info">
                    <h2>Shortlisting Level: <span id="shortlistLevel" class="highlight">--</span></h2>
                    <p id="levelDesc">Upload your resume to calculate.</p>
                    <div class="next-challenge-container" id="nextChallengeContainer">
                        <button class="btn-next-challenge" onclick="window.location.href='assessment.html'">
                            Next Challenge: Skill Assessment ‚Üí
                        </button>
                    </div>
                </div>
            </div>

            <!-- 3. What Went Wrong (Smart Detection) -->
            <section class="issues-section" id="issuesSection">
                <h3>‚ö†Ô∏è What Went Wrong</h3>
                <div class="cards-grid" id="issuesGrid">
                    <!-- Dynamic Issues will go here -->
                </div>
            </section>

            <!-- 4. What You Should Learn -->
            <section class="learning-section">
                <h3>üìö Recommended Learning Path</h3>
                <div class="cards-grid" id="learningGrid">
                    <!-- Dynamic Learning Cards go here -->
                </div>
            </section>

            <!-- 5. Build Your Own -->
            <section class="action-section">
                <h2>Want a Perfect Resume?</h2>
                <button class="btn-primary big-btn" onclick="window.location.href='resume-builder.html'">Build Your Own
                    Resume</button>
            </section>

            <!-- 6. Practice Path -->
            <section class="path-section">
                <h3>Your Next Steps</h3>
                <div class="steps-container">
                    <div class="step-card" onclick="window.location.href='resume-builder.html'">
                        <div class="step-num">01</div>
                        <h4>Fix Resume</h4>
                        <p style="font-size: 0.8rem; opacity: 0.7;">Use our builder</p>
                    </div>
                    <div class="step-arrow">‚ûú</div>
                    <div class="step-card" onclick="window.location.href='index.html#curriculum'">
                        <div class="step-num">02</div>
                        <h4>Skill Practice</h4>
                        <p style="font-size: 0.8rem; opacity: 0.7;">Master topics</p>
                    </div>
                    <div class="step-arrow">‚ûú</div>
                    <div class="step-card" onclick="window.location.href='index.html#about'">
                        <div class="step-num">03</div>
                        <h4>Mock Interview</h4>
                        <p style="font-size: 0.8rem; opacity: 0.7;">AI practice</p>
                    </div>
                </div>
            </section>

        </div>

    </div>

    <script src="js/resume.js"></script>
    <script>
        // Smooth 3D Page Transition
        document.querySelectorAll('a, .step-card').forEach(link => {
            link.addEventListener('click', (e) => {
                const href = link.getAttribute('href') || link.getAttribute('onclick')?.match(/'([^']+)'/)?.[1];
                if (href && !href.startsWith('#')) {
                    e.preventDefault();
                    gsap.to('body', {
                        opacity: 0,
                        rotateY: 10,
                        z: -500,
                        duration: 0.6,
                        ease: "power2.in",
                        onComplete: () => window.location.href = href
                    });
                }
            });
        });

        // Initial Entrance
        window.addEventListener('load', () => {
            gsap.from('body', { opacity: 0, z: 200, duration: 1, ease: "power3.out" });
        });
    </script>
</body>

</html>